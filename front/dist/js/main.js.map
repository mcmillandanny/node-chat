{"version":3,"sources":["main.js"],"names":["console","log","showMessagesOnDOM","messages","messagesUL","document","querySelector","innerHTML","deleteBtn","createElement","forEach","message","newMessage","username","text","timestamp","appendChild","sendMessage","field","userName","value","axios","post","moment","Date","getTime","format","then","response","data","catch","error","addEventListener"],"mappings":";;AAAAA,QAAQC,GAAR;;AAEA;;;;;;;;AASA;;AAEA;AACA;AACA;;;AAKA,IAAIC,oBAAoB,SAApBA,iBAAoB,CAASC,QAAT,EAAmB;AAC1CH,SAAQC,GAAR,CAAY,qBAAZ,EAAoCE,QAApC;;AAEA,KAAIC,aAAaC,SAASC,aAAT,CAAuB,aAAvB,CAAjB;AACAF,YAAWG,SAAX,GAAuB,EAAvB;;AAIA,KAAIC,YAAYH,SAASI,aAAT,CAAuB,QAAvB,CAAhB;;AAEAN,UAASO,OAAT,CAAkB,UAASC,OAAT,EAAkB;AACnC,MAAIC,aAAaP,SAASI,aAAT,CAAuB,IAAvB,CAAjB;AACAG,aAAWL,SAAX,GAA0BI,QAAQE,QAAlC,eAAoDF,QAAQG,IAA5D,WAAsEH,QAAQI,SAA9E;AACAP,YAAUQ,WAAV,CAAuBZ,UAAvB;AACAA,aAAWY,WAAX,CAAwBJ,UAAxB;AACA,EALD;AAQA,CAlBD;;AAqBA,IAAIK,cAAc,SAAdA,WAAc,GAAW;AAC5B,KAAIC,QAAQb,SAASC,aAAT,CAAuB,2BAAvB,CAAZ;AACA,KAAIa,WAAWd,SAASC,aAAT,CAAuB,yBAAvB,CAAf;AACAN,SAAQC,GAAR,CAAYkB,QAAZ;AACA,KAAID,MAAME,KAAV,EAAiB;AAChBpB,UAAQC,GAAR,CAAY,gBAAZ,EAA8BkB,SAASC,KAAvC;;AAEAC,QACEC,IADF,CACO,+BADP,EACwC;AACtCR,SAAMI,MAAME,KAD0B;AAEtCL,cAAWQ,OAAO,IAAIC,IAAJ,GAAWC,OAAX,EAAP,EAA6BC,MAA7B,CAAoC,QAApC,CAF2B;AAGtCb,aAAUM,SAASC;AAHmB,GADxC,EAMEO,IANF,CAMO,UAASC,QAAT,EAAmB;AACxB5B,WAAQC,GAAR,CAAY,gBAAZ;AACAiB,SAAME,KAAN,GAAc,EAAd;AACApB,WAAQC,GAAR,CAAY,kBAAZ,EAAgC2B,QAAhC;AACA1B,qBAAkB0B,SAASC,IAA3B;AACA,GAXF,EAYEC,KAZF,CAYQ,UAASC,KAAT,EAAgB;AACtB/B,WAAQC,GAAR,CAAY,aAAZ,EAA2B8B,KAA3B;AACA,GAdF;AAeC;AACD,CAvBF;;AA0BA;AACA;AACA;AACA;;;AAGA1B,SAASC,aAAT,CAAuB,aAAvB,EAAsC0B,gBAAtC,CAAuD,OAAvD,EAAgEf,WAAhE","file":"main.js","sourcesContent":["console.log(`Week3-Class-Node-HW`);\n\n/*  \n\tCreate  -post /message\n\tCreate  -get /message\n\tRead\t-get  /message\n\tUpdate\t-patch\t/message1\n\tDelete\t-delete /message1\n*/\n\n\n// user types, presses send, message appears\n\n// user types, presses send, send message to server, message appears\n// user types, presses send, get message from field,send message to server, message appears\n// user types, presses send, get message from field,send message to server, get message list from server, message appears\n\n\n\n\nlet showMessagesOnDOM = function(messages) {\n\tconsole.log('gonna show messages' , messages)\n\n\tlet messagesUL = document.querySelector('ul.messages');\n\tmessagesUL.innerHTML = '';\n\n\n\n\tlet deleteBtn = document.createElement('button');\n\n\tmessages.forEach( function(message) {\t\n\t\tlet newMessage = document.createElement('li');\n\t\tnewMessage.innerHTML = `${message.username} sent: ${message.text} @ ${message.timestamp}`\n\t\tdeleteBtn.appendChild( messagesUL );\n\t\tmessagesUL.appendChild( newMessage )\n\t})\n\t\n\n};\n\n\nlet sendMessage = function() {\n\tlet field = document.querySelector('input[name=\"new-message\"]');\n\tlet userName = document.querySelector('input[name=\"user-name\"]')\n\tconsole.log(userName)\n\tif (field.value) {\n\t\tconsole.log(\"send to server\", userName.value);\n\n\t\taxios\n\t\t\t.post(\"http://localhost:1337/message\", {\n\t\t\t\ttext: field.value,\n\t\t\t\ttimestamp: moment(new Date().getTime()).format('h:mm a'),\n\t\t\t\tusername: userName.value,\n\t\t\t})\n\t\t\t.then(function(response) {\n\t\t\t\tconsole.log(\"Wooooorrkiiing\")\n\t\t\t\tfield.value = \"\";\n\t\t\t\tconsole.log('server responded', response)\n\t\t\t\tshowMessagesOnDOM(response.data)\n\t\t\t})\n\t\t\t.catch(function(error) {\n\t\t\t\tconsole.log(\"broookkkeen\", error)\n\t\t\t})\n\t\t}\n\t}\n\n\n// let loadSite = function() {\n// \taxios.get('http://localhost:1337/message')\n// \tconsole.log(\"page loaded\")\n// }\n\n\ndocument.querySelector('button.send').addEventListener('click', sendMessage)"]}